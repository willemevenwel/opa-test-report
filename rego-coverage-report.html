<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polly Rego Testing & Coverage Report</title>
  
  <script id="generation-js">

// --- Dynamic coverage report generation ---
document.addEventListener('DOMContentLoaded', function () {
  // --- Coverage summary and policy cards ---
  fetch('/coverage.json')
    .then(function(response) { return response.json(); })
    .then(function(data) {
      document.getElementById('totalPolicies').textContent = data.totalPolicies || Object.keys(data.files || {}).length || 0;
      document.getElementById('totalCoveragePercentage').textContent = (data.totalCoveragePercentage || data.coverage || '0') + '%';
      document.getElementById('totalCoveredLines').textContent = data.totalCoveredLines || data.covered_lines || 0;
      document.getElementById('totalNotCoveredLines').textContent = data.totalNotCoveredLines || data.not_covered_lines || 0;

      var ul = document.getElementById('coverage-details');
      var templateLi = ul.querySelector('li');
      if (!templateLi) return;
      var template = templateLi.cloneNode(true);
      ul.innerHTML = '';

      function getLineStatusMap(policy) {
        var statusMap = {};
        if (Array.isArray(policy.ignored)) {
          policy.ignored.forEach(function(r) {
            for (var i = r.start.row; i <= (r.end.row || r.start.row); i++) statusMap[i] = 'ignored';
          });
        }
        if (Array.isArray(policy.covered)) {
          policy.covered.forEach(function(r) {
            for (var i = r.start.row; i <= (r.end.row || r.start.row); i++) if (!statusMap[i]) statusMap[i] = 'covered';
          });
        }
        if (Array.isArray(policy.not_covered)) {
          policy.not_covered.forEach(function(r) {
            for (var i = r.start.row; i <= (r.end.row || r.start.row); i++) if (!statusMap[i]) statusMap[i] = 'missed';
          });
        }
        return statusMap;
      }

      Object.entries(data.files || {}).forEach(function([path, policy], idx) {
        policy.path = path;
        var li = template.cloneNode(true);
        if (idx > 0) {
          var rawDiv = li.querySelector('#coverage-raw');
          if (rawDiv) rawDiv.remove();
        }
        var h2 = li.querySelector('h2');
        if (h2) {
          var name = path.split('/').pop();
          h2.innerHTML =
            name +
            ' <span style="font-weight:400;font-size:13px;color:var(--sq-muted);">(' + path + ')</span>';
        }
        var coveredPerc = li.querySelector('#covered-percentage');
        if (coveredPerc) coveredPerc.textContent = (policy.coverage || 0) + '%';
        var uncoveredLines = li.querySelector('#uncovered-lines');
        if (uncoveredLines) uncoveredLines.innerHTML = '<strong>Uncovered lines:</strong> ' + (policy.not_covered_lines || 0);
        var coveredLines = li.querySelector('#covered-lines');
        if (coveredLines) coveredLines.innerHTML = '<strong>Covered lines:</strong> ' + (policy.covered_lines || 0);
        var totalLines = li.querySelector('#total-lines');
        if (totalLines) totalLines.innerHTML = '<strong>Total lines:</strong> ' + ((policy.covered_lines || 0) + (policy.not_covered_lines || 0));

        var codeTable = li.querySelector('.code-table tbody');
        if (codeTable) {
          codeTable.innerHTML = '';
          fetch('/' + path)
            .then(function(resp) { return resp.ok ? resp.text() : ''; })
            .then(function(text) {
              var lines = text.split('\n');
              var statusMap = getLineStatusMap(policy);
              lines.forEach(function(line, idx) {
                var tr = document.createElement('tr');
                var lineNumber = idx + 1;
                var trimmed = line.trim();
                var isComment = trimmed.startsWith('#');
                var isImport = trimmed.startsWith('import ');
                var isIgnored =
                  trimmed === '' ||
                  trimmed === '}' ||
                  trimmed.startsWith('package ') ||
                  isImport ||
                  isComment ||
                  statusMap[lineNumber] === 'ignored';
                if (isIgnored) {
                  tr.className = 'ignored';
                } else if (statusMap[lineNumber] === 'covered') {
                  tr.className = 'covered';
                } else if (statusMap[lineNumber] === 'missed') {
                  tr.className = 'missed';
                }
                var tdLn = document.createElement('td');
                tdLn.className = 'ln';
                tdLn.innerHTML = '<a id="L' + lineNumber + '" href="#L' + lineNumber + '" style="color:inherit;text-decoration:none;">' + lineNumber + '</a>';
                var tdCode = document.createElement('td');
                tdCode.className = 'code';
                tdCode.textContent = line;
                tr.appendChild(tdLn);
                tr.appendChild(tdCode);
                codeTable.appendChild(tr);
              });
            });
        }
        ul.appendChild(li);
      });

      var rawPre = document.querySelector('#coverage-raw pre');
      if (rawPre) {
        rawPre.textContent = JSON.stringify(data, null, 2);
      }
    })
    .catch(function(err) {
      console.error('Failed to load coverage.json', err);
    });

  // --- Verbose table and raw section ---
  fetch('/verbose.txt')
    .then(function(response) { if (!response.ok) return null; return response.text(); })
    .then(function(text) {
      if (!text) return;
      var lines = text.split('\n');
      var tableData = [];
      var currentFile = null;
      var fileHeaderRe = /^([\w\/-]+\.rego):$/;
      var testLineRe = /^([^\s:]+):\s+(PASS|FAIL)\s+\(([^)]+)\)$/;
      lines.forEach(function(line) {
        var fileMatch = line.match(fileHeaderRe);
        if (fileMatch) {
          currentFile = fileMatch[1];
          return;
        }
        var testMatch = line.match(testLineRe);
        if (testMatch && currentFile) {
          tableData.push({
            file: currentFile,
            test: testMatch[1],
            result: testMatch[2],
            time: testMatch[3]
          });
        }
      });
      if (!tableData.length) return;
      var table = document.getElementById('table-verbose');
      if (!table) return;
      var tbody = document.createElement('tbody');
      tableData.forEach(function(row) {
        var tr = document.createElement('tr');
        var statusClass = 'status-other';
        if (row.result === 'PASS') statusClass = 'status-pass';
        else if (row.result === 'FAIL') statusClass = 'status-fail';
        var timeClass = '';
        var msMatch = row.time.match(/^([0-9]+)\s*ms$/i);
        if (msMatch && parseInt(msMatch[1], 10) > 100) timeClass = 'time-slow';
        var tdTest = document.createElement('td');
        tdTest.textContent = row.test;
        var tdStatus = document.createElement('td');
        tdStatus.textContent = row.result;
        tdStatus.className = statusClass;
        var tdTime = document.createElement('td');
        tdTime.textContent = row.time;
        if (timeClass) tdTime.className = timeClass;
        tr.appendChild(tdTest);
        tr.appendChild(tdStatus);
        tr.appendChild(tdTime);
        tbody.appendChild(tr);
      });
      // Remove old tbody if present
      var oldTbody = table.querySelector('tbody');
      if (oldTbody) table.removeChild(oldTbody);
      table.appendChild(tbody);

      // Fill the verbose raw <pre>
      var verbosePre = document.querySelector('#verbose-raw pre');
      if (verbosePre) verbosePre.textContent = text;
    });
});
  </script>
  
  <script id="main-js">


    // --- Highlight toggle and copy-to-clipboard logic for policy cards ---
    document.addEventListener('DOMContentLoaded', function () {
      // Eye button for highlight toggle
      document.querySelectorAll('.policy-card-template').forEach(function(card) {
        var eyeBtn = card.querySelector('.eye-btn');
        var codeWrap = card.querySelector('.code-wrap');
        if (eyeBtn && codeWrap) {
          eyeBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            codeWrap.classList.toggle('highlight-off');
            // Animate the eye icon (swap SVG for open/closed)
            var svg = eyeBtn.querySelector('svg');
            if (codeWrap.classList.contains('highlight-off')) {
              svg.innerHTML = '<title>Show highlights</title><path d="M2 2L18 18" stroke="#888" stroke-width="1.5"/><path d="M10 4C5.45455 4 2.27273 8.18182 2.27273 10C2.27273 11.8182 5.45455 16 10 16C14.5455 16 17.7273 11.8182 17.7273 10C17.7273 8.18182 14.5455 4 10 4Z" stroke="#888" stroke-width="1.5"/><circle cx="10" cy="10" r="3" stroke="#888" stroke-width="1.5"/>';
              eyeBtn.classList.add('eye-closed');
            } else {
              svg.innerHTML = '<title>Toggle coverage highlight on and off</title><path d="M10 4C5.45455 4 2.27273 8.18182 2.27273 10C2.27273 11.8182 5.45455 16 10 16C14.5455 16 17.7273 11.8182 17.7273 10C17.7273 8.18182 14.5455 4 10 4Z" stroke="#888" stroke-width="1.5"/><circle cx="10" cy="10" r="3" stroke="#888" stroke-width="1.5"/>';
              eyeBtn.classList.remove('eye-closed');
            }
            eyeBtn.classList.add('eye-animate');
            setTimeout(function(){ eyeBtn.classList.remove('eye-animate'); }, 250);
          });
        }
        // Copy button for code
        var copyBtn = card.querySelector('.copy-btn');
        var codeTable = card.querySelector('.code-table');
        if (copyBtn && codeTable) {
          copyBtn.addEventListener('click', function() {
            var lines = Array.from(codeTable.querySelectorAll('td.code')).map(function(td) {
              return td.innerText || td.textContent;
            });
            var text = lines.join('\n');
            navigator.clipboard.writeText(text);
            copyBtn.classList.add('copy-animate');
            copyBtn.title = 'Copied!';
            setTimeout(function(){ copyBtn.title = 'Copy code'; copyBtn.classList.remove('copy-animate'); }, 1200);
          });
        }
        // Policy card expand/collapse icon
        var summary = card.querySelector('summary');
        var icon = summary && summary.querySelector('.policy-toggle-icon');
        if (icon) {
          function updateIcon() {
            if (card.open) {
              icon.style.transform = 'rotate(0deg)';
            } else {
              icon.style.transform = 'rotate(-90deg)';
            }
          }
          card.addEventListener('toggle', updateIcon);
          updateIcon();
        }
      });

      // --- Copy button for coverage raw ---
      var covRaw = document.querySelector('#coverage-raw details.expandable');
      if (covRaw) {
        var covCopyBtn = covRaw.querySelector('.copy-btn');
        var covPre = covRaw.querySelector('pre');
        if (covCopyBtn && covPre) {
          covCopyBtn.addEventListener('click', function() {
            navigator.clipboard.writeText(covPre.innerText || covPre.textContent);
            covCopyBtn.classList.add('copy-animate');
            covCopyBtn.title = 'Copied!';
            setTimeout(function(){ covCopyBtn.title = 'Copy content'; covCopyBtn.classList.remove('copy-animate'); }, 1200);
          });
        }
      }

      // --- Copy button for verbose raw ---
      var verboseRaw = document.querySelector('#verbose-raw details.expandable');
      if (verboseRaw) {
        var verboseCopyBtn = verboseRaw.querySelector('.copy-btn');
        var verbosePre = verboseRaw.querySelector('pre');
        if (verboseCopyBtn && verbosePre) {
          verboseCopyBtn.addEventListener('click', function() {
            navigator.clipboard.writeText(verbosePre.innerText || verbosePre.textContent);
            verboseCopyBtn.classList.add('copy-animate');
            verboseCopyBtn.title = 'Copied!';
            setTimeout(function(){ verboseCopyBtn.title = 'Copy content'; verboseCopyBtn.classList.remove('copy-animate'); }, 1200);
          });
        }
      }

      // Expand/collapse icons for expandable details
      document.querySelectorAll('details.expandable').forEach(function(details) {
        var summary = details.querySelector('summary.expandable-header');
        var icon = summary && summary.querySelector('.expandable-toggle-icon');
        if (icon) {
          function updateIcon() {
            if (details.open) {
              icon.style.transform = 'rotate(0deg)';
            } else {
              icon.style.transform = 'rotate(-90deg)';
            }
          }
          details.addEventListener('toggle', updateIcon);
          updateIcon();
        }
      });
    });

    // --- Eye and copy button animation styles ---
    var style = document.createElement('style');
    style.innerHTML = `
      .eye-animate svg { transition: filter 0.2s, transform 0.2s; filter: drop-shadow(0 0 2px #4e91f9); transform: scale(1.15); }
      .eye-closed svg { opacity: 0.7; }
      .copy-animate svg { transition: filter 0.2s, transform 0.2s; filter: drop-shadow(0 0 2px #4caf50); transform: scale(1.15); }
    `;
    document.head.appendChild(style);

</script>
  
  <style>
    .policy-card-template {
      border: 1.5px solid #bbb;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
      background: #fff;
    }
    /* SonarQube-like theme */
    :root {
      --sq-bg: #f5f5f5;
      --sq-card: #fff;
      --sq-border: #e5e5e5;
      --sq-primary: #4e91f9;
      --sq-muted: #888;
      --sq-header: #232c3b;
      --sq-table-header: #f0f4f8;
      --sq-success: #4caf50;
      --sq-fail: #e53935;
      --sq-font: 'Segoe UI', 'Arial', sans-serif;
    }
    body {
      background: var(--sq-bg);
      color: #222;
      font-family: var(--sq-font);
      margin: 0;
      padding: 0;
    }
    header {
      background: var(--sq-header);
      color: #fff;
      padding: 18px 32px;
      font-size: 1.5rem;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    main {
      max-width: 900px;
      margin: 32px auto;
      background: var(--sq-card);
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      padding: 32px 28px 40px 28px;
      border: 1px solid var(--sq-border);
    }
    h1, h2, h3 {
      color: var(--sq-header);
      margin-top: 0;
    }

    ul, li {
    all: unset;
    display: block; /* Optional: ensures li behaves like a block element */
    }

    .summary-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 32px;
      background: var(--sq-table-header);
      border-radius: 6px 6px 0 0;
      overflow: hidden;
    }
    .summary-table th, .summary-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--sq-border);
      text-align: left;
      font-size: 1rem;
    }
    .summary-table th {
      background: var(--sq-table-header);
      color: var(--sq-header);
      font-weight: 600;
    }
    .summary-table tr:last-child td {
      border-bottom: none;
    }
    .coverage-pass {
      color: var(--sq-success);
      font-weight: 600;
    }
    .coverage-fail {
      color: var(--sq-fail);
      font-weight: 600;
    }
    .muted {
      color: var(--sq-muted);
      font-size: 0.95em;
    }
    .expandable-content pre {
      white-space: pre-wrap;
      word-break: break-word;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #bbb;
      border-radius: 4px;
      background: #fafbfc;
      padding: 10px 12px;
      margin-top: 10px;
    }
    .expandable {
      box-sizing: border-box;
      border: 1px solid #bbb;
      border-radius: 4px;
      background: #fafbfc;
      padding: 10px;
    }
    #coverage-main, #verbose-main {
      border: 2px solid #bbb;
      border-radius: 8px;
      margin-bottom: 32px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
      padding: 18px 20px 24px 20px;
    }


    /* Coverage highlights for code-table rows */
    tr.covered td.code {
      background: #e6ffe6 !important;
    }
    tr.missed td.code {
      background: #ffe6e6 !important;
    }
    tr.ignored td.code {
      background: #e6f0ff !important;
    }

    /* Hide highlights when highlight-off is set on code-wrap */
    .highlight-off tr.covered td.code,
    .highlight-off tr.missed td.code,
    .highlight-off tr.ignored td.code {
      background: none !important;
    }

    .legend {
      margin-bottom: 18px;
      font-size: 14px;
      display: flex;
      gap: 24px;
      align-items: center;
    }

    .legend-swatch {
      display: inline-block;
      width: 18px;
      height: 18px;
      border-radius: 3px;
      margin-right: 6px;
      vertical-align: middle;
      border: 1px solid #bbb;
    }

    .covered-swatch {
      background: #e6ffe6 !important;
      border-color: #b2e6b2;
    }

    .uncovered-swatch {
      background: #ffe6e6 !important;
      border-color: #e6b2b2;
    }

    .ignored-swatch {
      background: #e6f0ff !important;
      border-color: #b2cbe6;
    }

    /* Policy renderer colors for verbose table */
    .status-pass {
      background: #e6ffe6 !important;
      color: #222 !important;
    }
    .status-fail {
      background: #ffe6e6 !important;
      color: #222 !important;
    }
    .time-slow {
      background: #ffeacc !important; /* soft orange, fits coverage scheme */
      color: #222 !important;
      font-weight: bold;
    }


</style>
</head>
<body>
  <header>Polly Rego Testing & Coverage Report</header>
  <main>
    <div id="coverage-main" class="card">
        <h1>Project Coverage Summary</h1>
        <table id="coverage-summary" class="summary-table" style="margin-bottom: 12px;">
            <tbody>
                <tr>
                    <td style="padding-right: 24px;"><strong>Total Policies:</strong></td>
                    <td id="totalPolicies">8</td>
                    <td style="padding-right: 24px;"><strong>Total coverage:</strong></td>
                    <td id="totalCoveragePercentage">96%</td>
                </tr>
                <tr>
                    <td style="padding-right: 24px;"><strong>Covered lines:</strong></td>
                    <td id="totalCoveredLines">30</td>
                    <td style="padding-right: 24px;"><strong>Not covered lines:</strong></td>
                    <td id="totalNotCoveredLines">1</td>
                </tr>
            </tbody>
        </table>
        <h2>Coverage Details</h2>
        <!-- Legend for code highlights -->
        <div class="legend" style="margin-bottom:18px; font-size:14px; display:flex; gap:24px; align-items:center;">
          <span><span class="legend-swatch covered-swatch"></span>Covered line</span>
          <span><span class="legend-swatch uncovered-swatch"></span>Not covered line</span>
          <span><span class="legend-swatch ignored-swatch"></span>Ignored line</span>
        </div>
        <ul id="coverage-details">
      <li>
        <!-- Expandable/collapsible policy card -->
        <details class="policy-card-template card" style="margin-top:16px;" open>
          <summary style="list-style:none;outline:none;cursor:pointer;display:flex;align-items:center;padding:10px 12px;">
            <span class="policy-toggle-icon" style="display:inline-block;width:18px;height:18px;margin-right:6px;transition:transform 0.2s;">
              <svg viewBox="0 0 16 16" width="16" height="16" style="display:block;"><polyline points="4,6 8,10 12,6" fill="none" stroke="#888" stroke-width="2"/></svg>
            </span>
            <span style="margin-right:10px;">&#128196;</span>
            <h2 style="margin:0;flex:1;font-size:16px;">payment.rego <span style="font-weight:400;font-size:13px;color:var(--sq-muted);">(policies/payment.rego)</span></h2>
            <button class="eye-btn" title="Toggle highlight" aria-label="Toggle highlight" style="background:none;border:none;cursor:pointer;padding:0 8px 0 8px;display:flex;align-items:center;">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Toggle coverage highlight on and off</title><path d="M10 4C5.45455 4 2.27273 8.18182 2.27273 10C2.27273 11.8182 5.45455 16 10 16C14.5455 16 17.7273 11.8182 17.7273 10C17.7273 8.18182 14.5455 4 10 4Z" stroke="#888" stroke-width="1.5"/><circle cx="10" cy="10" r="3" stroke="#888" stroke-width="1.5"/></svg>
            </button>
            <button class="copy-btn" title="Copy code" aria-label="Copy code" style="background:none;border:none;cursor:pointer;padding:0 8px 0 0;display:flex;align-items:center;">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy policy to clipboard</title><rect x="5" y="5" width="10" height="12" rx="2" stroke="#888" stroke-width="1.5" fill="#fff"/><rect x="8" y="2" width="7" height="12" rx="2" stroke="#bbb" stroke-width="1.2" fill="#f7f7f7"/></svg>
            </button>
            <span id="covered-percentage" style="margin-left:8px;color:var(--sq-muted);font-size:14px;">75%</span>
            <span id="uncovered-lines" style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Uncovered lines:</strong> 25</span>
            <span id="covered-lines" style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Covered lines:</strong> 75</span>
            <span id="total-lines" style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Total lines:</strong> 100</span>
          </summary>
          <div class="code-wrap" style="background:#fafbfc;border-radius:6px;padding:10px 12px;margin-top:8px;">
            <table class="code-table" style="width:100%;border-collapse:collapse;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace;font-size:13px;line-height:1.45;">
              <tbody>
                <tr class="covered">
                <td class="ln"><a id="L1" href="#L1" style="color:inherit;text-decoration:none;">1</a></td>
                <td class="code">package payment</td>
                </tr>
                <tr class="ignored">
                <td class="ln"><a id="L2" href="#L2" style="color:inherit;text-decoration:none;">2</a></td>
                <td class="code">default allow = false</td>
                </tr>
                <tr class="covered">
                <td class="ln"><a id="L3" href="#L3" style="color:inherit;text-decoration:none;">3</a></td>
                <td class="code">allow &#123;</td>
                </tr>
                <tr class="covered">
                <td class="ln"><a id="L4" href="#L4" style="color:inherit;text-decoration:none;">4</a></td>
                <td class="code">    input.amount &lt; 1000</td>
                </tr>
                <tr class="missed">
                <td class="ln"><a id="L5" href="#L5" style="color:inherit;text-decoration:none;">5</a></td>
                <td class="code">    input.user == "manager"</td>
                </tr>
                <tr class="covered">
                <td class="ln"><a id="L6" href="#L6" style="color:inherit;text-decoration:none;">6</a></td>
                <td class="code">&#125;</td>
                </tr>
              </tbody>
            </table>
          </div>
        </details>
      </li>
    </ul>

    <div id="coverage-raw" style="padding-top: 15px;">
      <details class="expandable">
        <summary class="expandable-header" style="display:flex;align-items:center;cursor:pointer;">
          <span class="expandable-toggle-icon" style="display:inline-block;width:18px;height:18px;margin-right:6px;transition:transform 0.2s;">
            <svg viewBox="0 0 16 16" width="16" height="16" style="display:block;"><polyline points="4,6 8,10 12,6" fill="none" stroke="#888" stroke-width="2"/></svg>
          </span>
          <span style="flex:1;">Expand for raw coverage report.</span>
          <button class="copy-btn" title="Copy content" aria-label="Copy content" style="background:none;border:none;cursor:pointer;padding:0 0 0 8px;display:flex;align-items:center;">
            <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy to clipboard</title><rect x="5" y="5" width="10" height="12" rx="2" stroke="#888" stroke-width="1.5" fill="#fff"/><rect x="8" y="2" width="7" height="12" rx="2" stroke="#bbb" stroke-width="1.2" fill="#f7f7f7"/></svg>
          </button>
        </summary>
        <div class="expandable-content">
          <pre></pre>
        </div>
      </details>
    </div>
        </ul>
    </div>
    <div id="verbose-main" class="card">
        <div>
            <h2>Verbose Details</h2>
            <div id="verbose-details">

                <div class="legend" id="verbose-legend" style="margin: 10px 0 24px 0;">
                    <span><span class="legend-swatch covered-swatch"></span>PASS</span>
                    <span><span class="legend-swatch uncovered-swatch"></span>FAIL</span>
                    <span><span class="legend-swatch time-slow"></span>Time &gt; 100ms</span>
                </div>

                <table id="table-verbose" class="summary-table">
                    <thead>
                        <tr>
                            <th>Test</th>
                            <th>Status</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows will be dynamically inserted here -->
                        <!-- Example static row for illustration: -->
                        <tr>
                            <td>order_service/invoice/allow</td>
                            <td class="status-pass">PASS</td>
                            <td>12</td>
                        </tr>
                        <tr>
                            <td>order_service/invoice/deny</td>
                            <td class="status-fail">FAIL</td>
                            <td>8</td>
                        </tr>
                        <tr>
                            <td>order_service/invoice/slow</td>
                            <td class="status-pass">PASS</td>
                            <td class="time-slow">120</td>
                        </tr>
                    </tbody>
                </table>            
            </div>
            <div id="verbose-raw">
                <details class="expandable">
                    <summary class="expandable-header" style="display:flex;align-items:center;cursor:pointer;">
                      <span class="expandable-toggle-icon" style="display:inline-block;width:18px;height:18px;margin-right:6px;transition:transform 0.2s;">
                        <svg viewBox="0 0 16 16" width="16" height="16" style="display:block;"><polyline points="4,6 8,10 12,6" fill="none" stroke="#888" stroke-width="2"/></svg>
                      </span>
                      <span style="flex:1;">Expand for more verbose info</span>
                      <button class="copy-btn" title="Copy content" aria-label="Copy content" style="background:none;border:none;cursor:pointer;padding:0 0 0 8px;display:flex;align-items:center;">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy to clipboard</title><rect x="5" y="5" width="10" height="12" rx="2" stroke="#888" stroke-width="1.5" fill="#fff"/><rect x="8" y="2" width="7" height="12" rx="2" stroke="#bbb" stroke-width="1.2" fill="#f7f7f7"/></svg>
                      </button>
                    <button class="eye-btn" title="Toggle highlight" aria-label="Toggle highlight" style="background:none;border:none;cursor:pointer;padding:0 8px 0 8px;display:flex;align-items:center;">
                    </button>
                    </summary>
                    <div class="expandable-content">
                        <pre>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque. Suspendisse potenti. Etiam euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque.</pre>
                    </div>
                </details>
            </div>
        </div>
    </div>

    <div id="footer" style="text-align: center;">
        <pre>    Welcome to Polly Rego Policy Coverage Report utility!

            :::::::::::::::::::::::::::------::.+#+=::::::::::::::::::::::::::::::
            ::::::::::::::::::::::::-+*********+=:*##*::::::::::::::::::::::::::::
            ::::------------------=*#**************#*#=:-====-::::::::::::::::::::
            :::++++++++++++++++++*#***************##*##*********=:::::::::::::::::
            ::-*+++++++++==++++=*#*##***************************#*-.::::::::::::::
            ::-*+++++++=--=+++++####***************#**************#-::::::::::::::
            ::-*++=-++=:-=++++++*+#****************#***************#+-::::=+::::::
            ::-*++=:---=++++++++++#**********#*====#*******************++**#=:::::
            ::-*++++--++++++++++++##**********-=====*******##**************#+:::::
            ::-*++++++++=-=+++++*#**#*******##====+++**+++=*#*************#+::::::
            ::-*++==++=--=++++++#*#*+++++++++===========---+#*************#+::::::
            ::-*++=:--:=+++++++*#*#***+=-===-====*******+===****************#-::::
            ::-*+++=--=+++++++++%#+==+*#+======**+++++=+**=-=*#***************::::
            ::-*++++++++=-=++++#**=+=-=*#*====#*++=---++=*#==-=*##***********#-:::
            ::-*++==+++-:-++++*#*#+-...-*#==-**++:.::::=*=#+===+#************#::::
            ::-*++=:==:-=+++++##*#*:-++-+#*++#+*::+*+-::*=*#***##***********#+::::
            ::-*+++=::=+++++++#*=#*:*%%*+%***#*+:+%%%*::*=#*===#**********##=:::::
            ::-*++++=++++==++++#**+=*%#*+++++##*:*%#%*:+++#==+##*********#=:::::::
            ::-*+++++++=--=+++=*#+=+**==---===*#+=*#*==++#+===++##******#=..::::::
            ::-*++=-==--=++++++*=+***======+=-=+#**++****======-*#*****#-.:-::::::
            ::-*+++-::-++++++++*-==#=-=========-+#***++=========#******#==*#::::::
            ::-*++++==+++++++++#+-=#=-==========#*=++-=========+#*********#+::::::
            :::+++++++++++++++++#+=+*=-+***#####%+-*+-======-=*#****##****+:::::::
            ::::--------====-----=+++*+*=*+%#**#*-=*========*##**##*##+--:::::::::
            ::::::::::-*****+-:::::-=+*+=+*+***+=+*=====++*##*%#*##+==::::::::::::
            :::::::::-#*******:::::::::-==+*++++*+===++#+:-=+++---::::::::::::::::
            ::::::::.-#*****##+=::::::::..-#===========**-:..:::::::::::::=+**-:::
            ::::::::=*****#*+++**:::::::-+#+-========++****+=:::::::::::=**++*+:::
            :::::::=#+++++#+++*+#-.:::-+*#*+======++++**++++**=:::::::-**++++#-:::
            :::::::-#*****#****+#+==+**+#*++++++++++++#+++++++*+:::::=*+++++#=::::
            :::::::=#+++++*#*#+++++*+++**+++++++++++++#++++++++**-::=#+++++#++++::
            :::::::=#++***#**##**++++++#++++++++++++++#++++++++++*--#+++++##*++#::
            ::::::::-**+*##******#*+++**++++++++++++++*#*****+++++*#++++*#*+++#=::
            ::::::::::-*#*********#++*#*++++++++++*****+++++++++++*#+++**++++*=:::
            :::::::::::+**********#*+==#++++++++***++++++++++++++++#*+**+++**-::::
            :::::::::::=#***#####**=---**+++++***+***++++++++++++++**++++**=::::::
            :::::::::::-+*#*+++==------=***++**+**++***++++++++++***+++**+-::--:::
            ===========+++============-:::-+*#+#*+*#*+++***++++*##*++**+==========
            =========++=-==++=-----:--=+-::.=#**+*#+++*#*****+++++**+=============
            ======+++-::=+-+++=++++=====+:-==-=**#****++==---::::-+#+++++++++=====
            ====+*+-:::::+=:::------==+=+==-::::--==-::::::::::-==-+*+============
            ====#========-====-------=+*=-:::::::::::::::::::-==-=-=#**+==========
            ===*#===----======-------==-:::::::::::::::::::-==--=-=+*#*+==========
            ==+###****++==---==-:.:==-:::::::::::::::::::-==-=--=**#*+============
            ====++****###**++==++=*+=======---:::::::::-==-==-=**#*+==============
            ==========+++**#####%%*+===---=======-:::-==-=--=**#*+================
            ================+**######***++==----====+=-==-=*##*+==================
            ==================+++++++***###**++==--=+--==*##*+====================
            ===========================+++***###**+=+==*##*+======================
            =================================++***###*##*+========================
            ======================================++***+==========================
            Created by @willemevenwel on GitHub
        </pre>
    </div>

  </main>

</body>
</html>
