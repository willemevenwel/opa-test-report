<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polly Rego Testing & Coverage Report</title>
  
  <script id="generation-js">

  </script>
  
  <script id="main-js">

    // Toggle code highlight (adds/removes a class on the code-wrap)
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.policy-card-template').forEach(function(card) {
        var eyeBtn = card.querySelector('.eye-btn');
        var codeWrap = card.querySelector('.code-wrap');
        if (eyeBtn && codeWrap) {
          eyeBtn.addEventListener('click', function() {
            codeWrap.classList.toggle('highlight-off');
            // Optionally swap the eye icon SVG here if you want
          });
        }
        var copyBtn = card.querySelector('.copy-btn');
        var pre = card.querySelector('pre');
        if (copyBtn && pre) {
          copyBtn.addEventListener('click', function() {
            var text = pre.innerText || pre.textContent;
            navigator.clipboard.writeText(text);
            copyBtn.title = 'Copied!';
            setTimeout(function(){ copyBtn.title = 'Copy code'; }, 1200);
          });
        }
      });
    });

</script>
  
  <style>
    /* SonarQube-like theme */
    :root {
      --sq-bg: #f5f5f5;
      --sq-card: #fff;
      --sq-border: #e5e5e5;
      --sq-primary: #4e91f9;
      --sq-muted: #888;
      --sq-header: #232c3b;
      --sq-table-header: #f0f4f8;
      --sq-success: #4caf50;
      --sq-fail: #e53935;
      --sq-font: 'Segoe UI', 'Arial', sans-serif;
    }
    body {
      background: var(--sq-bg);
      color: #222;
      font-family: var(--sq-font);
      margin: 0;
      padding: 0;
    }
    header {
      background: var(--sq-header);
      color: #fff;
      padding: 18px 32px;
      font-size: 1.5rem;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    main {
      max-width: 900px;
      margin: 32px auto;
      background: var(--sq-card);
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      padding: 32px 28px 40px 28px;
      border: 1px solid var(--sq-border);
    }
    h1, h2, h3 {
      color: var(--sq-header);
      margin-top: 0;
    }
    .summary-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 32px;
      background: var(--sq-table-header);
      border-radius: 6px 6px 0 0;
      overflow: hidden;
    }
    .summary-table th, .summary-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--sq-border);
      text-align: left;
      font-size: 1rem;
    }
    .summary-table th {
      background: var(--sq-table-header);
      color: var(--sq-header);
      font-weight: 600;
    }
    .summary-table tr:last-child td {
      border-bottom: none;
    }
    .coverage-pass {
      color: var(--sq-success);
      font-weight: 600;
    }
    .coverage-fail {
      color: var(--sq-fail);
      font-weight: 600;
    }
    .muted {
      color: var(--sq-muted);
      font-size: 0.95em;
    }
    .expandable-content pre {
      white-space: pre-wrap;
      word-break: break-word;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #bbb;
      border-radius: 4px;
      background: #fafbfc;
      padding: 10px 12px;
      margin: 0;
    }
    #coverage-main, #verbose-main {
      border: 2px solid #bbb;
      border-radius: 8px;
      margin-bottom: 32px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
      padding: 18px 20px 24px 20px;
    }

</style>
</head>
<body>
  <header>Polly Rego Testing & Coverage Report</header>
  <main>
    <div id="coverage-main" class="card">
        <h1>Project Coverage Summary</h1>
        <table class="summary-table">
        <tr>
            <th>File</th>
            <th>Coverage</th>
            <th>Covered Lines</th>
            <th>Uncovered Lines</th>
        </tr>
        <tr>
            <td>example.rego</td>
            <td class="coverage-pass">95%</td>
            <td>190</td>
            <td>10</td>
        </tr>
        <tr>
            <td>policy.rego</td>
            <td class="coverage-fail">72%</td>
            <td>72</td>
            <td>28</td>
        </tr>
      <!-- Template summary row with placeholder data -->
      <tr id="summary-row-template">
        <td>template.rego</td>
        <td class="coverage-pass">88%</td>
        <td>88</td>
        <td>12</td>
      </tr>
        </table>
            <h2>Coverage Details</h2>
        <!-- Legend for code highlights -->
        <div class="legend" style="margin-bottom:18px; font-size:14px; display:flex; gap:24px; align-items:center;">
          <span><span style="display:inline-block;width:18px;height:18px;border-radius:3px;margin-right:6px;vertical-align:middle;border:1px solid #b2e6b2;background:#e6ffe6;"></span>Covered line</span>
          <span><span style="display:inline-block;width:18px;height:18px;border-radius:3px;margin-right:6px;vertical-align:middle;border:1px solid #e6b2b2;background:#ffe6e6;"></span>Not covered line</span>
          <span><span style="display:inline-block;width:18px;height:18px;border-radius:3px;margin-right:6px;vertical-align:middle;border:1px solid #b2cbe6;background:#e6f0ff;"></span>Ignored line</span>
        </div>
         <!-- Template policy card with placeholder data -->
        <div class="policy-card-template card" style="margin-top:24px;">
          <div style="display:flex;align-items:center;padding:10px 12px;">
            <span style="margin-right:10px;">&#128196;</span>
            <h2 style="margin:0;flex:1;font-size:16px;">template.rego <span style="font-weight:400;font-size:13px;color:var(--sq-muted);">(policies/template.rego)</span></h2>
            <button class="eye-btn" title="Toggle highlight" aria-label="Toggle highlight" style="background:none;border:none;cursor:pointer;padding:0 8px 0 8px;display:flex;align-items:center;">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Toggle coverage highlight on and off</title><path d="M10 4C5.45455 4 2.27273 8.18182 2.27273 10C2.27273 11.8182 5.45455 16 10 16C14.5455 16 17.7273 11.8182 17.7273 10C17.7273 8.18182 14.5455 4 10 4Z" stroke="#888" stroke-width="1.5"/><circle cx="10" cy="10" r="3" stroke="#888" stroke-width="1.5"/></svg>
            </button>
            <button class="copy-btn" title="Copy code" aria-label="Copy code" style="background:none;border:none;cursor:pointer;padding:0 8px 0 0;display:flex;align-items:center;">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy policy to clipboard</title><rect x="5" y="5" width="10" height="12" rx="2" stroke="#888" stroke-width="1.5" fill="#fff"/><rect x="8" y="2" width="7" height="12" rx="2" stroke="#bbb" stroke-width="1.2" fill="#f7f7f7"/></svg>
            </button>
            <span style="margin-left:8px;color:var(--sq-muted);font-size:14px;">88%</span>
            <span style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Uncovered lines:</strong> 12</span>
            <span style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Covered lines:</strong> 88</span>
            <span style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Total lines:</strong> 100</span>
          </div>
          <div class="code-wrap" style="background:#fafbfc;border-radius:6px;padding:10px 12px;margin-top:8px;">
            <pre style="margin:0;font-family:monospace;font-size:13px;">
            01 package example
            02 default allow = false
            03 allow {
            04     input.user == "admin"
            05 }
            </pre>
          </div>
        </div>
        <!-- Second template policy card with different placeholder data -->
        <div class="policy-card-template card" style="margin-top:16px;">
        <div style="display:flex;align-items:center;padding:10px 12px;">
            <span style="margin-right:10px;">&#128196;</span>
            <h2 style="margin:0;flex:1;font-size:16px;">payment.rego <span style="font-weight:400;font-size:13px;color:var(--sq-muted);">(policies/payment.rego)</span></h2>
            <button class="eye-btn" title="Toggle highlight" aria-label="Toggle highlight" style="background:none;border:none;cursor:pointer;padding:0 8px 0 8px;display:flex;align-items:center;">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Toggle coverage highlight on and off</title><path d="M10 4C5.45455 4 2.27273 8.18182 2.27273 10C2.27273 11.8182 5.45455 16 10 16C14.5455 16 17.7273 11.8182 17.7273 10C17.7273 8.18182 14.5455 4 10 4Z" stroke="#888" stroke-width="1.5"/><circle cx="10" cy="10" r="3" stroke="#888" stroke-width="1.5"/></svg>
            </button>
            <button class="copy-btn" title="Copy code" aria-label="Copy code" style="background:none;border:none;cursor:pointer;padding:0 8px 0 0;display:flex;align-items:center;">
            <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy policy to clipboard</title><rect x="5" y="5" width="10" height="12" rx="2" stroke="#888" stroke-width="1.5" fill="#fff"/><rect x="8" y="2" width="7" height="12" rx="2" stroke="#bbb" stroke-width="1.2" fill="#f7f7f7"/></svg>
            </button>
            <span style="margin-left:8px;color:var(--sq-muted);font-size:14px;">75%</span>
            <span style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Uncovered lines:</strong> 25</span>
            <span style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Covered lines:</strong> 75</span>
            <span style="margin-left:12px;color:var(--sq-muted);font-size:13px;"><strong>Total lines:</strong> 100</span>
        </div>
        <div class="code-wrap" style="background:#fafbfc;border-radius:6px;padding:10px 12px;margin-top:8px;">
            <pre style="margin:0;font-family:monospace;font-size:13px;">
            01 package payment
            02 default allow = false
            03 allow {
            04     input.amount < 1000
            05     input.user == "manager"
            06 }
            </pre>
        </div>
        </div>
        <div>
           <p class="muted">Select a file above to see line-by-line coverage details.</p>
            <div id="coverage-details">
                <details class="expandable">
                    <summary class="expandable-header">Expand for more verbose info</summary>
                    <div class="expandable-content">
                        <pre>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque. Suspendisse potenti. Etiam euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque.</pre>
                    </div>
                </details>
        </div>
    </div>
    </div>
    <div id="verbose-main" class="card">
        <div>
            <h2>Verbose Details</h2>
            <p class="muted">Select a file above to see line-by-line coverage details.</p>
            <div id="verbose-details">
                <details class="expandable">
                    <summary class="expandable-header">Expand for more verbose info</summary>
                    <div class="expandable-content">
                        <pre>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque. Suspendisse potenti. Etiam euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque.</pre>
                    </div>
                </details>
            </div>
        </div>
    </div>
  </main>
</body>
</html>
